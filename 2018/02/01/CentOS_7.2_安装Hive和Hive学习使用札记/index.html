<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>CentOS 7.2 安装Hive和Hive学习使用札记 | YoungLiang | 生活充满乐趣与童真</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="">
    <meta name="description" content="Hive由Facebook开源，是一个构建在Hadoop之上的数据仓库将结构化的数据映射成表支持类SQL查询，Hive中称为HQL无法实时更新，只支持向现有表中追加数据。                                                                                             Hive原理图.png">
<meta name="keywords" content="程序猿、跳舞爱好者、读书">
<meta property="og:type" content="article">
<meta property="og:title" content="CentOS 7.2 安装Hive和Hive学习使用札记">
<meta property="og:url" content="https://yongliangzhang.github.io/blogs/2018/02/01/CentOS_7.2_安装Hive和Hive学习使用札记/index.html">
<meta property="og:site_name" content="YoungLiang">
<meta property="og:description" content="Hive由Facebook开源，是一个构建在Hadoop之上的数据仓库将结构化的数据映射成表支持类SQL查询，Hive中称为HQL无法实时更新，只支持向现有表中追加数据。                                                                                             Hive原理图.png">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1784853-6ac187cbbbf83261.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2018-02-01T06:01:43.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CentOS 7.2 安装Hive和Hive学习使用札记">
<meta name="twitter:description" content="Hive由Facebook开源，是一个构建在Hadoop之上的数据仓库将结构化的数据映射成表支持类SQL查询，Hive中称为HQL无法实时更新，只支持向现有表中追加数据。                                                                                             Hive原理图.png">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/1784853-6ac187cbbbf83261.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
    
        <link rel="alternate" type="application/atom+xml" title="YoungLiang" href="/blogs/atom.xml">
    
    <link rel="shortcut icon" href="/blogs/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/blogs/img/brand.jpg)">
      <div class="brand">
        <a href="/blogs/" class="avatar waves-effect waves-circle waves-light">
          <img src="https://s1.ax2x.com/2018/01/31/ZL8UG.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">YoungLiang</h5>
          <a href="mailto:zhangyongliang1231@163.com" title="zhangyongliang1231@163.com" class="mail">zhangyongliang1231@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/blogs/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/blogs/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                历程
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/blogs/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/blogs/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/yongliangZhang" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.jianshu.com/u/31c3a36c409d" target="_blank" >
                <i class="icon icon-lg icon-book"></i>
                简书
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">CentOS 7.2 安装Hive和Hive学习使用札记</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">CentOS 7.2 安装Hive和Hive学习使用札记</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-02-01T06:02:28.037Z" itemprop="datePublished" class="page-time">
  2018-02-01
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Hive常用文件格式类型"><span class="post-toc-number">1.</span> <span class="post-toc-text">Hive常用文件格式类型</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#常用数据类型"><span class="post-toc-number">2.</span> <span class="post-toc-text">常用数据类型</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-整数类型"><span class="post-toc-number">2.0.0.1.</span> <span class="post-toc-text">1.整数类型</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-浮点类型"><span class="post-toc-number">2.0.0.2.</span> <span class="post-toc-text">2.浮点类型</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-布尔类型BOOLEAN"><span class="post-toc-number">2.0.0.3.</span> <span class="post-toc-text">3. 布尔类型BOOLEAN</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-字符串文本类型STRING"><span class="post-toc-number">2.0.0.4.</span> <span class="post-toc-text">4.字符串文本类型STRING</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-时间戳类型TIMESTAMP"><span class="post-toc-number">2.0.0.5.</span> <span class="post-toc-text">5.时间戳类型TIMESTAMP</span></a></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#复杂数据类型"><span class="post-toc-number">3.</span> <span class="post-toc-text">复杂数据类型</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-ARRAY"><span class="post-toc-number">3.0.0.1.</span> <span class="post-toc-text">1.ARRAY</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-MAP"><span class="post-toc-number">3.0.0.2.</span> <span class="post-toc-text">2.MAP</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-STRUCT"><span class="post-toc-number">3.0.0.3.</span> <span class="post-toc-text">3.STRUCT</span></a></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#一、Hive的安装"><span class="post-toc-number">4.</span> <span class="post-toc-text">一、Hive的安装</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-下载Hive安装包并解压"><span class="post-toc-number">4.0.0.1.</span> <span class="post-toc-text">1.下载Hive安装包并解压</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-使用Root用户创建软链接"><span class="post-toc-number">4.0.0.2.</span> <span class="post-toc-text">2.使用Root用户创建软链接</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-为Hive指定用户组"><span class="post-toc-number">4.0.0.3.</span> <span class="post-toc-text">3.为Hive指定用户组</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-添加Hive到系统环境变量并生效"><span class="post-toc-number">4.0.0.4.</span> <span class="post-toc-text">4. 添加Hive到系统环境变量并生效</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-配置Hive的默认metastore"><span class="post-toc-number">4.0.0.5.</span> <span class="post-toc-text">5.配置Hive的默认metastore</span></a></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#二、Hive的使用"><span class="post-toc-number">5.</span> <span class="post-toc-text">二、Hive的使用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-运行hive"><span class="post-toc-number">5.0.0.1.</span> <span class="post-toc-text">1.运行hive</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-查看数据库"><span class="post-toc-number">5.0.0.2.</span> <span class="post-toc-text">2.查看数据库</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-创建用户表：-user-info"><span class="post-toc-number">5.0.0.3.</span> <span class="post-toc-text">3.创建用户表： user_info</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-查看表"><span class="post-toc-number">5.0.0.4.</span> <span class="post-toc-text">4.查看表</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-hive删除表"><span class="post-toc-number">5.0.0.5.</span> <span class="post-toc-text">5.hive删除表</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-创建数据库，用于存储维度"><span class="post-toc-number">5.0.0.6.</span> <span class="post-toc-text">6.创建数据库，用于存储维度</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-创建内部管理表"><span class="post-toc-number">5.0.0.7.</span> <span class="post-toc-text">7.创建内部管理表</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#8-使用load从本地加载数据到表"><span class="post-toc-number">5.0.0.8.</span> <span class="post-toc-text">8.使用load从本地加载数据到表</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#9-使用load从HDFS上加载数据到表student-info"><span class="post-toc-number">5.0.0.9.</span> <span class="post-toc-text">9.使用load从HDFS上加载数据到表student_info</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#10-Hive的数据类型"><span class="post-toc-number">5.0.0.10.</span> <span class="post-toc-text">10.Hive的数据类型</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#11-创建外部表-【常用】"><span class="post-toc-number">5.0.0.11.</span> <span class="post-toc-text">11.创建外部表 【常用】</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#12-创建内部分区表"><span class="post-toc-number">5.0.0.12.</span> <span class="post-toc-text">12.创建内部分区表</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#13-查看分区"><span class="post-toc-number">5.0.0.13.</span> <span class="post-toc-text">13.查看分区</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#14-删除分区"><span class="post-toc-number">5.0.0.14.</span> <span class="post-toc-text">14.删除分区</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#15-使用动态分区添加数据"><span class="post-toc-number">5.0.0.15.</span> <span class="post-toc-text">15.使用动态分区添加数据</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#15-创建外部分区表【常用】"><span class="post-toc-number">5.0.0.16.</span> <span class="post-toc-text">15.创建外部分区表【常用】</span></a></li></ol></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-CentOS_7.2_安装Hive和Hive学习使用札记"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">CentOS 7.2 安装Hive和Hive学习使用札记</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-02-01 14:02:28" datetime="2018-02-01T06:02:28.037Z"  itemprop="datePublished">2018-02-01</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>Hive由Facebook开源，是一个构建在Hadoop之上的数据仓库将结构化的数据映射成表支持类SQL查询，Hive中称为HQL无法实时更新，只支持向现有表中追加数据。<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://upload-images.jianshu.io/upload_images/1784853-6ac187cbbbf83261.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Hive原理图.png" title="">
                </div>
                <div class="image-caption">Hive原理图.png</div>
            </figure></p>
<h1 id="Hive常用文件格式类型"><a href="#Hive常用文件格式类型" class="headerlink" title="Hive常用文件格式类型"></a>Hive常用文件格式类型</h1><p><strong>TEXTFILE</strong></p>
<ul>
<li>默认文件格式，建表时用户需要显示指定分隔符</li>
<li>存储方式：行存储</li>
</ul>
<p><strong>SequenceFile</strong></p>
<ul>
<li>二进制键值对序列化文件格式</li>
<li>存储方式：行存储</li>
</ul>
<p><strong>列式存储格式</strong></p>
<ul>
<li>RCFILE/ORC</li>
<li>存储方式：列存储<h1 id="常用数据类型"><a href="#常用数据类型" class="headerlink" title="常用数据类型"></a>常用数据类型</h1><h4 id="1-整数类型"><a href="#1-整数类型" class="headerlink" title="1.整数类型"></a>1.整数类型</h4></li>
<li>SMALLINT、INT、BIGINT</li>
<li>空间占用分别是1字节、2字节、4字节、8字节<h4 id="2-浮点类型"><a href="#2-浮点类型" class="headerlink" title="2.浮点类型"></a>2.浮点类型</h4></li>
<li>DOUBLE</li>
<li>空间占用分别是32位和64位浮点数<h4 id="3-布尔类型BOOLEAN"><a href="#3-布尔类型BOOLEAN" class="headerlink" title="3. 布尔类型BOOLEAN"></a>3. 布尔类型BOOLEAN</h4></li>
<li>用于存储true和false<h4 id="4-字符串文本类型STRING"><a href="#4-字符串文本类型STRING" class="headerlink" title="4.字符串文本类型STRING"></a>4.字符串文本类型STRING</h4></li>
<li>存储变长字符串，对类型长度没有限制<h4 id="5-时间戳类型TIMESTAMP"><a href="#5-时间戳类型TIMESTAMP" class="headerlink" title="5.时间戳类型TIMESTAMP"></a>5.时间戳类型TIMESTAMP</h4></li>
<li>存储精度为纳秒的时间戳<h1 id="复杂数据类型"><a href="#复杂数据类型" class="headerlink" title="复杂数据类型"></a>复杂数据类型</h1><h4 id="1-ARRAY"><a href="#1-ARRAY" class="headerlink" title="1.ARRAY"></a>1.ARRAY</h4></li>
<li>存储相同类型的数据，可以通过下标获取数据</li>
<li>定义：ARRAY<string></string></li>
<li>查询：array[index]<h4 id="2-MAP"><a href="#2-MAP" class="headerlink" title="2.MAP"></a>2.MAP</h4></li>
<li>存储键值对数据，键或者值的类型必须相同，通过键获取值。</li>
<li>定义：MAP<string,int></string,int></li>
<li>查询：map[‘key’]<h4 id="3-STRUCT"><a href="#3-STRUCT" class="headerlink" title="3.STRUCT"></a>3.STRUCT</h4></li>
<li>可以存储多种不同的数据类型，一旦声明好结构，各字段的位置不能够改变。</li>
<li>定义：STRUCT<city:string, address="" :string,door_num:string=""></city:string,></li>
<li>查询：struct.fieldname<h1 id="一、Hive的安装"><a href="#一、Hive的安装" class="headerlink" title="一、Hive的安装"></a>一、Hive的安装</h1><h4 id="1-下载Hive安装包并解压"><a href="#1-下载Hive安装包并解压" class="headerlink" title="1.下载Hive安装包并解压"></a>1.下载Hive安装包并解压</h4></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 apps]$ tar -zxvf apache-hive-1.2.2-bin.tar.gz</span><br></pre></td></tr></table></figure>
<h4 id="2-使用Root用户创建软链接"><a href="#2-使用Root用户创建软链接" class="headerlink" title="2.使用Root用户创建软链接"></a>2.使用Root用户创建软链接</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop01 apps]# ln -s /home/hadoop/apps/apache-hive-1.2.2-bin /usr/local/hive</span><br></pre></td></tr></table></figure>
<h4 id="3-为Hive指定用户组"><a href="#3-为Hive指定用户组" class="headerlink" title="3.为Hive指定用户组"></a>3.为Hive指定用户组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop01 apps]# chown -R hadoop:hadoop /usr/local/hive</span><br></pre></td></tr></table></figure>
<h4 id="4-添加Hive到系统环境变量并生效"><a href="#4-添加Hive到系统环境变量并生效" class="headerlink" title="4. 添加Hive到系统环境变量并生效"></a>4. 添加Hive到系统环境变量并生效</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop01 apps]# vim /etc/profile</span><br></pre></td></tr></table></figure>
<p>添加环境变量内容为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export HIVE_HOME=/usr/local/hive</span><br><span class="line">export PATH=$PATH:$&#123;JAVA_HOME&#125;/bin:$&#123;ZOOKEEPER_HOME&#125;/bin:$&#123;HADOOP_HOME&#125;/bin:$&#123;HADOOP_HOME&#125;/sbin</span><br><span class="line">:$&#123;HIVE_HOME&#125;/bin</span><br></pre></td></tr></table></figure>
<p>生效环境变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop01 apps]# source /etc/profile</span><br></pre></td></tr></table></figure>
<h4 id="5-配置Hive的默认metastore"><a href="#5-配置Hive的默认metastore" class="headerlink" title="5.配置Hive的默认metastore"></a>5.配置Hive的默认metastore</h4><p>修改Hive配置目录下的hive-site.xml配置文件，编辑内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;</span><br><span class="line">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">   Licensed to the Apache Software Foundation (ASF) under one or more</span><br><span class="line">   contributor license agreements.  See the NOTICE file distributed with</span><br><span class="line">   this work for additional information regarding copyright ownership.</span><br><span class="line">   The ASF licenses this file to You under the Apache License, Version 2.0</span><br><span class="line">   (the &quot;License&quot;); you may not use this file except in compliance with</span><br><span class="line">   the License.  You may obtain a copy of the License at</span><br><span class="line"></span><br><span class="line">       http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line"></span><br><span class="line">   Unless required by applicable law or agreed to in writing, software</span><br><span class="line">   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class="line">   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="line">   See the License for the specific language governing permissions and</span><br><span class="line">   limitations under the License.</span><br><span class="line">--&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;jdbc:mysql://192.168.43.50:3306/hive?createDatabaseIfNotExist=true&amp;amp;characterEncoding=UTF-8&lt;/value&gt;</span><br><span class="line">		&lt;description&gt;JDBC connect string for a JDBC metastore&lt;/description&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;</span><br><span class="line">		&lt;description&gt;Driver class name for a JDBC metastore&lt;/description&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;hadoop&lt;/value&gt;</span><br><span class="line">		&lt;description&gt;username to use against metastore database&lt;/description&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;xxxx&lt;/value&gt;</span><br><span class="line">		&lt;description&gt;password to use against metastore database&lt;/description&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<p><strong>说明：数据库连接地址为Mysql地址，且所配置用户具有外网访问数据库权限,ConnectionPassword配置成个人Mysql数据库用户密码</strong></p>
<h1 id="二、Hive的使用"><a href="#二、Hive的使用" class="headerlink" title="二、Hive的使用"></a>二、Hive的使用</h1><h4 id="1-运行hive"><a href="#1-运行hive" class="headerlink" title="1.运行hive"></a>1.运行hive</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 ~]$ hive</span><br><span class="line"></span><br><span class="line">Logging initialized using configuration in jar:file:/home/hadoop/apps/apache-hive-1.2.2-bin/lib/hive-common-1.2.2.jar!/hive-log4j.properties</span><br></pre></td></tr></table></figure>
<h4 id="2-查看数据库"><a href="#2-查看数据库" class="headerlink" title="2.查看数据库"></a>2.查看数据库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; show databases;</span><br><span class="line">OK</span><br><span class="line">default</span><br><span class="line">Time taken: 0.99 seconds, Fetched: 1 row(s)</span><br></pre></td></tr></table></figure>
<h4 id="3-创建用户表：-user-info"><a href="#3-创建用户表：-user-info" class="headerlink" title="3.创建用户表： user_info"></a>3.创建用户表： user_info</h4><p>字段信息 </p>
<table>
<thead>
<tr>
<th>字段名称</th>
<th>字段类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户id</td>
<td>string</td>
</tr>
<tr>
<td>地域id</td>
<td>string</td>
</tr>
<tr>
<td>年龄</td>
<td>int</td>
</tr>
<tr>
<td>职业</td>
<td>string</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">create table user_info(</span><br><span class="line">user_id string,</span><br><span class="line">area_id string,</span><br><span class="line">age int,</span><br><span class="line">occupation string</span><br><span class="line">)</span><br><span class="line">row format delimited fields terminated by &apos;\t&apos; </span><br><span class="line">lines terminated by &apos;\n&apos;</span><br><span class="line">stored as textfile;</span><br></pre></td></tr></table></figure>
<h4 id="4-查看表"><a href="#4-查看表" class="headerlink" title="4.查看表"></a>4.查看表</h4><p>查看default库中的表，发现新建的user_info表在default库中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; show tables;</span><br><span class="line">OK</span><br><span class="line">user_info</span><br><span class="line">Time taken: 0.04 seconds, Fetched: 1 row(s)</span><br></pre></td></tr></table></figure>
<p>查看对应文件目录信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 root]$ hadoop fs -ls /user/hive/warehouse</span><br><span class="line">Found 1 items</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-14 19:48 /user/hive/warehouse/user_info</span><br></pre></td></tr></table></figure>
<h4 id="5-hive删除表"><a href="#5-hive删除表" class="headerlink" title="5.hive删除表"></a>5.hive删除表</h4><p>删除user_info表，user_info表在hdfs的目录也会被同时删除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; drop table user_info;</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.935 seconds</span><br><span class="line">hive&gt; show tables;</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.041 seconds</span><br></pre></td></tr></table></figure>
<p>查看文件目录位置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 root]$ hadoop fs -ls /user/hive/warehouse</span><br><span class="line">[hadoop@hadoop01 root]$</span><br></pre></td></tr></table></figure>
<h4 id="6-创建数据库，用于存储维度"><a href="#6-创建数据库，用于存储维度" class="headerlink" title="6.创建数据库，用于存储维度"></a>6.创建数据库，用于存储维度</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; create database rel;</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.098 seconds</span><br><span class="line">hive&gt; show databases;</span><br><span class="line">OK</span><br><span class="line">default</span><br><span class="line">rel</span><br><span class="line">Time taken: 0.025 seconds, Fetched: 2 row(s)</span><br></pre></td></tr></table></figure>
<p>查看对应文件目录信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 root]$ hadoop fs -ls /user/hive/warehouse</span><br><span class="line">Found 1 items</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-14 19:55 /user/hive/warehouse/rel.db</span><br></pre></td></tr></table></figure>
<h4 id="7-创建内部管理表"><a href="#7-创建内部管理表" class="headerlink" title="7.创建内部管理表"></a>7.创建内部管理表</h4><p>在数据库rel中创建学生信息表，字段信息：学号、姓名、年龄、地域。切换使用rel数据库：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">use rel;</span><br><span class="line">create table student_info(</span><br><span class="line">student_id string comment &apos;学号&apos;,</span><br><span class="line">name string comment &apos;姓名&apos;,</span><br><span class="line">age int comment &apos;年龄&apos;,</span><br><span class="line">origin string comment &apos;地域&apos;</span><br><span class="line">)</span><br><span class="line">comment &apos;学生信息表&apos;</span><br><span class="line">row format delimited </span><br><span class="line">fields terminated by &apos;\t&apos; </span><br><span class="line">lines terminated by &apos;\n&apos;</span><br><span class="line">stored as textfile;</span><br></pre></td></tr></table></figure>
<p>查看对应目录信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 root]$ hadoop fs -ls /user/hive/warehouse/rel.db</span><br><span class="line">Found 1 items</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-14 19:59 /user/hive/warehouse/rel.db/student_info</span><br></pre></td></tr></table></figure>
<h4 id="8-使用load从本地加载数据到表"><a href="#8-使用load从本地加载数据到表" class="headerlink" title="8.使用load从本地加载数据到表"></a>8.使用load从本地加载数据到表</h4><p>使用load从本地加载数据到表student_info</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; load data local inpath &apos;/home/hadoop/apps/hive_test_data/student_info_data.txt&apos; into table student_info;</span><br><span class="line">Loading data to table rel.student_info</span><br><span class="line">Table rel.student_info stats: [numFiles=1, totalSize=341]</span><br><span class="line">OK</span><br><span class="line">Time taken: 1.144 seconds</span><br></pre></td></tr></table></figure>
<p>查看student_info 表信息和对应文件路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select * from student_info;</span><br><span class="line">OK</span><br><span class="line">1	xiaoming	20	11</span><br><span class="line">2	xiaobai	21	31</span><br><span class="line">3	zhangfei	22	44</span><br><span class="line">4	likui	19	44</span><br><span class="line">5	zhaoyun	21	13</span><br><span class="line">6	zhangsan	20	11</span><br><span class="line">7	lisi	19	11</span><br><span class="line">8	wangwu	23	31</span><br><span class="line">9	zhaofei	19	21</span><br><span class="line">10	zhangyan	20	21</span><br><span class="line">11	lihe	20	22</span><br><span class="line">12	caoyang	17	32</span><br><span class="line">13	lihao	19	32</span><br><span class="line">14	zhaoming	21	50</span><br><span class="line">15	zhouhong	18	51</span><br><span class="line">16	yangshuo	23	33</span><br><span class="line">17	xiaofei	24	13</span><br><span class="line">18	liman	23	13</span><br><span class="line">19	qianbao	20	13</span><br><span class="line">20	sunce	21	41</span><br><span class="line">Time taken: 0.767 seconds, Fetched: 20 row(s)</span><br></pre></td></tr></table></figure>
<p>查看对应文件夹路径信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 hive_test_data]$ hadoop fs -ls /user/hive/warehouse/rel.db/student_info</span><br><span class="line">Found 1 items</span><br><span class="line">-rwxr-xr-x   3 hadoop supergroup        341 2018-01-14 20:09 /user/hive/warehouse/rel.db/student_info/student_info_data.txt</span><br></pre></td></tr></table></figure>
<h4 id="9-使用load从HDFS上加载数据到表student-info"><a href="#9-使用load从HDFS上加载数据到表student-info" class="headerlink" title="9.使用load从HDFS上加载数据到表student_info"></a>9.使用load从HDFS上加载数据到表student_info</h4><p>先删除原有数据文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 hive_test_data]$ hadoop fs -rm -f /user/hive/warehouse/rel.db/student_info/student_info_data.txt</span><br><span class="line">18/01/14 20:15:31 INFO fs.TrashPolicyDefault: Namenode trash configuration: Deletion interval = 0 minutes, Emptier interval = 0 minutes.</span><br><span class="line">Deleted /user/hive/warehouse/rel.db/student_info/student_info_data.txt</span><br></pre></td></tr></table></figure>
<p>将本地文件上传到HDFS根目录下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 hive_test_data]$ hadoop fs -put /home/hadoop/apps/hive_test_data/student_info_data.txt /</span><br><span class="line">[hadoop@hadoop01 hive_test_data]$ hadoop fs -ls /</span><br><span class="line">Found 6 items</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-14 16:23 /addata</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2017-12-23 20:20 /data</span><br><span class="line">-rw-r--r--   3 hadoop supergroup        341 2018-01-14 20:16 /student_info_data.txt</span><br><span class="line">drwxrwx---   - hadoop supergroup          0 2018-01-14 17:26 /tmp</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-14 19:48 /user</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-13 16:26 /wordcount</span><br></pre></td></tr></table></figure>
<p>使用load将HDFS文件加载到student_info 表中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; load data inpath &apos;/student_info_data.txt&apos; into table student_info;</span><br><span class="line">Loading data to table rel.student_info</span><br><span class="line">Table rel.student_info stats: [numFiles=1, totalSize=341]</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.602 seconds</span><br><span class="line">hive&gt; select * from student_info;</span><br><span class="line">OK</span><br><span class="line">1	xiaoming	20	11</span><br><span class="line">2	xiaobai	21	31</span><br><span class="line">3	zhangfei	22	44</span><br><span class="line">4	likui	19	44</span><br><span class="line">5	zhaoyun	21	13</span><br><span class="line">6	zhangsan	20	11</span><br><span class="line">7	lisi	19	11</span><br><span class="line">8	wangwu	23	31</span><br><span class="line">9	zhaofei	19	21</span><br><span class="line">10	zhangyan	20	21</span><br><span class="line">11	lihe	20	22</span><br><span class="line">12	caoyang	17	32</span><br><span class="line">13	lihao	19	32</span><br><span class="line">14	zhaoming	21	50</span><br><span class="line">15	zhouhong	18	51</span><br><span class="line">16	yangshuo	23	33</span><br><span class="line">17	xiaofei	24	13</span><br><span class="line">18	liman	23	13</span><br><span class="line">19	qianbao	20	13</span><br><span class="line">20	sunce	21	41</span><br><span class="line">Time taken: 0.143 seconds, Fetched: 20 row(s)</span><br></pre></td></tr></table></figure>
<p>采用覆盖重写方式加载文件到student_info 表中</p>
<ul>
<li>原hdfs根目录下的student_info_data.txt已经被剪切到student_info表的hdfs路径下/user/hive/warehouse/rel.db/student_info<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; load data inpath &apos;/student_info_data.txt&apos; overwrite into table student_info;</span><br><span class="line">Loading data to table rel.student_info</span><br><span class="line">Table rel.student_info stats: [numFiles=1, numRows=0, totalSize=341, rawDataSize=0]</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.41 seconds</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="10-Hive的数据类型"><a href="#10-Hive的数据类型" class="headerlink" title="10.Hive的数据类型"></a>10.Hive的数据类型</h4><table>
<thead>
<tr>
<th style="text-align:left">字段名</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">注释</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">user_id</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用户ID</td>
</tr>
<tr>
<td style="text-align:left">salary</td>
<td style="text-align:left">int</td>
<td style="text-align:left">工资</td>
</tr>
<tr>
<td style="text-align:left">worked_citys</td>
<td style="text-align:left">array<string></string></td>
<td style="text-align:left">工作过的城市</td>
</tr>
<tr>
<td style="text-align:left">social_security</td>
<td style="text-align:left">map<string,float></string,float></td>
<td style="text-align:left">社保缴费情况(养老，医保)</td>
</tr>
<tr>
<td style="text-align:left">wealfare</td>
<td style="text-align:left">struct<meal_allowance:float,if_regular:boolean,commerical_insurance:float></meal_allowance:float,if_regular:boolean,commerical_insurance:float></td>
<td style="text-align:left">福利(吃饭补助(float),是否转正(boolean),商业保险(float)</td>
</tr>
</tbody>
</table>
<p>创建员工表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; create table rel.employee(</span><br><span class="line">    &gt; user_id string,</span><br><span class="line">    &gt; salary int,</span><br><span class="line">    &gt; worked_citys array&lt;string&gt;,</span><br><span class="line">    &gt; social_security map&lt;string,float&gt;,</span><br><span class="line">    &gt; welfare struct&lt;meal_allowance:float,if_regular:boolean,commercial_insurance:float&gt;</span><br><span class="line">    &gt; )</span><br><span class="line">    &gt; row format delimited fields terminated by &apos;\t&apos; </span><br><span class="line">    &gt; collection items terminated by &apos;,&apos;</span><br><span class="line">    &gt; map keys terminated by &apos;:&apos;</span><br><span class="line">    &gt; lines terminated by &apos;\n&apos;</span><br><span class="line">    &gt; stored as textfile;</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.212 seconds</span><br><span class="line">hive&gt; show tables;</span><br><span class="line">OK</span><br><span class="line">employee</span><br><span class="line">student_info</span><br><span class="line">Time taken: 0.057 seconds, Fetched: 2 row(s)</span><br></pre></td></tr></table></figure>
<p>从本地加载数据到表employee</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; load data local inpath &apos;/home/hadoop/apps/hive_test_data/employee_data.txt&apos; into table employee;</span><br><span class="line">Loading data to table rel.employee</span><br><span class="line">Table rel.employee stats: [numFiles=1, totalSize=206]</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.388 seconds</span><br><span class="line">hive&gt; select * from employee;</span><br><span class="line">OK</span><br><span class="line">zhangsan	10800	[&quot;beijing&quot;,&quot;shanghai&quot;]	&#123;&quot;养老&quot;:1000.0,&quot;医疗&quot;:600.0&#125;	&#123;&quot;meal_allowance&quot;:2000.0,&quot;if_regular&quot;:true,&quot;commercial_insurance&quot;:500.0&#125;</span><br><span class="line">lisi	20000	[&quot;beijing&quot;,&quot;nanjing&quot;]	&#123;&quot;养老&quot;:2000.0,&quot;医疗&quot;:1200.0&#125;	&#123;&quot;meal_allowance&quot;:2000.0,&quot;if_regular&quot;:false,&quot;commercial_insurance&quot;:500.0&#125;</span><br><span class="line">wangwu	17000	[&quot;shanghai&quot;,&quot;nanjing&quot;]	&#123;&quot;养老&quot;:1800.0,&quot;医疗&quot;:1100.0&#125;	&#123;&quot;meal_allowance&quot;:2000.0,&quot;if_regular&quot;:true,&quot;commercial_insurance&quot;:500.0&#125;</span><br><span class="line">Time taken: 0.127 seconds, Fetched: 3 row(s)</span><br></pre></td></tr></table></figure>
<p>查询已转正的员工编号，工资，工作过的第一个城市，社保养老缴费情况，福利餐补金额</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select user_id,</span><br><span class="line">salary,</span><br><span class="line">worked_citys[0],</span><br><span class="line">social_security[&apos;养老&apos;],</span><br><span class="line">welfare.meal_allowance </span><br><span class="line">from rel.employee</span><br><span class="line">where welfare.if_regular=true;</span><br></pre></td></tr></table></figure>
<h4 id="11-创建外部表-【常用】"><a href="#11-创建外部表-【常用】" class="headerlink" title="11.创建外部表 【常用】"></a>11.创建外部表 【常用】</h4><p>可以提前创建好hdfs路径<br>hadoop mkdir -p /user/hive/warehouse/data/student_school_info<br>如果没有提前创建好，在创建外部表的时候会根据指定路径自动创建<br>|字段名|字段类型|字段注释|<br>|:—-:|:—-:|:—-:|<br>|student_id|string|学生ID|<br>|name|string|学生姓名|<br>|institute_id|string|学院ID|<br>|major_id|string|专业ID|<br>|school_year|string|入学年份|</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create external table rel.student_school_info(</span><br><span class="line">student_id string,</span><br><span class="line">name string,</span><br><span class="line">institute_id string,</span><br><span class="line">major_id string,</span><br><span class="line">school_year string</span><br><span class="line">)</span><br><span class="line">row format delimited </span><br><span class="line">fields terminated by &apos;\t&apos; </span><br><span class="line">lines terminated by &apos;\n&apos;</span><br><span class="line">stored as textfile</span><br><span class="line">location &apos;/user/hive/warehouse/data/student_school_info&apos;;</span><br></pre></td></tr></table></figure>
<p>查看对应文件目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 root]$ hadoop fs -ls /user/hive/warehouse/data/</span><br><span class="line">Found 1 items</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-15 14:08 /user/hive/warehouse/data/student_school_info</span><br></pre></td></tr></table></figure>
<p>上传本地数据文件到hdfs</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 root]$ hadoop fs -put /home/hadoop/apps/hive_test_data/student_school_info_external_data.txt /user/hive/warehouse/data/student_school_info/</span><br></pre></td></tr></table></figure>
<h4 id="12-创建内部分区表"><a href="#12-创建内部分区表" class="headerlink" title="12.创建内部分区表"></a>12.创建内部分区表</h4><table>
<thead>
<tr>
<th style="text-align:center">字段名称</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">注释</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">studnet_id</td>
<td style="text-align:center">string</td>
<td style="text-align:center">学号</td>
</tr>
<tr>
<td style="text-align:center">name</td>
<td style="text-align:center">string</td>
<td style="text-align:center">姓名</td>
</tr>
<tr>
<td style="text-align:center">institute_id</td>
<td style="text-align:center">string</td>
<td style="text-align:center">学院ID</td>
</tr>
<tr>
<td style="text-align:center">major_id</td>
<td style="text-align:center">string</td>
<td style="text-align:center">专业ID</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create table student_school_info_partition(</span><br><span class="line">student_id string,</span><br><span class="line">name string,</span><br><span class="line">institute_id string,</span><br><span class="line">major_id string</span><br><span class="line">)</span><br><span class="line">partitioned by(school_year string) </span><br><span class="line">row format delimited</span><br><span class="line">fields terminated by &apos;\t&apos; </span><br><span class="line">lines terminated by &apos;\n&apos;</span><br><span class="line">stored as textfile;</span><br></pre></td></tr></table></figure>
<p> 使用insert into从student_school_info表将2017年入学的学籍信息导入到student_school_info_partition分区表中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">insert into table student_school_info_partition partition(school_year=&apos;2017&apos;)</span><br><span class="line">select t1.student_id,t1.name,t1.institute_id,t1.major_id</span><br><span class="line">from student_school_info t1</span><br><span class="line">where t1.school_year=2017;</span><br></pre></td></tr></table></figure>
<h4 id="13-查看分区"><a href="#13-查看分区" class="headerlink" title="13.查看分区"></a>13.查看分区</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; show partitions student_school_info_partition;</span><br><span class="line">OK</span><br><span class="line">school_year=2017</span><br><span class="line">Time taken: 0.191 seconds, Fetched: 1 row(s)</span><br></pre></td></tr></table></figure>
<p>查看hdfs路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 root]$ hadoop fs -ls /user/hive/warehouse/rel.db/student_school_info_partition/</span><br><span class="line">Found 1 items</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-16 13:20 /user/hive/warehouse/rel.db/student_school_info_partition/school_year=2017</span><br></pre></td></tr></table></figure>
<p>查询student_school_info_partition</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select * from student_school_info_partition where school_year=&apos;2017&apos;;</span><br><span class="line">OK</span><br><span class="line">1	xiaoming	information	software	2017</span><br><span class="line">2	xiaobai	information	computer	2017</span><br><span class="line">3	zhangfei	information	computer	2017</span><br><span class="line">4	likui	information	bigdata	2017</span><br><span class="line">5	zhaoyun	information	bigdata	2017</span><br><span class="line">6	zhangsan	information	software	2017</span><br><span class="line">7	lisi	information	bigdata	2017</span><br><span class="line">8	wangwu	information	computer	2017</span><br><span class="line">Time taken: 0.226 seconds, Fetched: 8 row(s)</span><br></pre></td></tr></table></figure>
<h4 id="14-删除分区"><a href="#14-删除分区" class="headerlink" title="14.删除分区"></a>14.删除分区</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; alter table student_school_info_partition drop partition (school_year=&apos;2017&apos;);</span><br><span class="line">Dropped the partition school_year=2017</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.71 seconds</span><br></pre></td></tr></table></figure>
<h4 id="15-使用动态分区添加数据"><a href="#15-使用动态分区添加数据" class="headerlink" title="15.使用动态分区添加数据"></a>15.使用动态分区添加数据</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">set hive.exec.dynamic.partition=true;</span><br><span class="line">set hive.exec.dynamic.partition.mode=nonstrict;</span><br><span class="line">insert overwrite table student_school_info_partition partition(school_year)</span><br><span class="line">select t1.student_id,t1.name,t1.institute_id,t1.major_id,t1.school_year</span><br><span class="line">from student_school_info t1</span><br></pre></td></tr></table></figure>
<p>查看分区</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; show partitions student_school_info_partition;</span><br><span class="line">OK</span><br><span class="line">school_year=2017</span><br><span class="line">Time taken: 0.12 seconds, Fetched: 1 row(s)</span><br></pre></td></tr></table></figure>
<p>查看hdfs路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 root]$ hadoop fs -ls /user/hive/warehouse/rel.db/student_school_info_partition/</span><br><span class="line">Found 1 items</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-16 13:27 /user/hive/warehouse/rel.db/student_school_info_partition/school_year=2017</span><br></pre></td></tr></table></figure>
<h4 id="15-创建外部分区表【常用】"><a href="#15-创建外部分区表【常用】" class="headerlink" title="15.创建外部分区表【常用】"></a>15.创建外部分区表【常用】</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create external table rel.student_school_info_external_partition(</span><br><span class="line">student_id string,</span><br><span class="line">name string,</span><br><span class="line">institute_id string,</span><br><span class="line">major_id string</span><br><span class="line">)</span><br><span class="line">partitioned by(school_year string) </span><br><span class="line">row format delimited </span><br><span class="line">fields terminated by &apos;\t&apos; </span><br><span class="line">lines terminated by &apos;\n&apos;</span><br><span class="line">stored as textfile</span><br><span class="line">location &apos;/user/hive/warehouse/data/student_school_info_external_partition&apos;;</span><br></pre></td></tr></table></figure>
<p>在分区表的hdfs路径中添加school_year=2017目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -mkdir /user/hive/warehouse/data/student_school_info_external_partition/school_year=2017</span><br></pre></td></tr></table></figure>
<p>将student_school_external_partition_data.txt文件上传到school_year=2017文件夹下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -put student_school_external_partition_data.txt /user/hive/warehouse/data/student_school_info_external_partition/school_year=2017</span><br></pre></td></tr></table></figure>
<p>虽然数据已经添加到了分区对应的hdfs路径，但是表还没有添加分区，所以查询的时候没有数据</p>
<p>手动添加分区</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; alter table student_school_info_external_partition add partition(school_year=&apos;2017&apos;);</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.111 seconds</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select * from student_school_info_external_partition;</span><br><span class="line">OK</span><br><span class="line">1	xiaoming	information	software	2017</span><br><span class="line">2	xiaobai	information	computer	2017</span><br><span class="line">3	zhangfei	information	computer	2017</span><br><span class="line">4	likui	information	bigdata	2017</span><br><span class="line">5	zhaoyun	information	bigdata	2017</span><br><span class="line">6	zhangsan	information	software	2017</span><br><span class="line">7	lisi	information	bigdata	2017</span><br><span class="line">8	wangwu	information	computer	2017</span><br><span class="line">Time taken: 0.127 seconds, Fetched: 8 row(s)</span><br></pre></td></tr></table></figure>
<p>删除分区</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; alter table student_school_info_external_partition drop partition(school_year=&apos;2017&apos;);</span><br><span class="line">Dropped the partition school_year=2017</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.19 seconds</span><br></pre></td></tr></table></figure>
<p>查看分区，分区已经被删除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; show partitions student_school_info_external_partition;</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.168 seconds</span><br></pre></td></tr></table></figure>
<p>查看hdfs分区数据，分区数据还在</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 hive_test_data]$ hadoop fs -ls /user/hive/warehouse/data/student_school_info_external_partition/school_year=2017</span><br><span class="line">Found 1 items</span><br><span class="line">-rw-r--r--   3 hadoop supergroup        250 2018-01-16 13:33 /user/hive/warehouse/data/student_school_info_external_partition/school_year=2017/student_school_external_partition_data.txt</span><br></pre></td></tr></table></figure>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2018-02-01T06:01:43.000Z" itemprop="dateUpdated">2018-02-01 14:01:43</time>
</span><br>


        
    </div>
    
    <footer>
        <a href="https://yongliangzhang.github.io/blogs">
            <img src="https://s1.ax2x.com/2018/01/31/ZL8UG.png" alt="YoungLiang">
            YoungLiang
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            

            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://yongliangzhang.github.io/blogs/2018/02/01/CentOS_7.2_安装Hive和Hive学习使用札记/&title=《CentOS 7.2 安装Hive和Hive学习使用札记》 — YoungLiang&pic=https://s1.ax2x.com/2018/01/31/ZL8UG.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://yongliangzhang.github.io/blogs/2018/02/01/CentOS_7.2_安装Hive和Hive学习使用札记/&title=《CentOS 7.2 安装Hive和Hive学习使用札记》 — YoungLiang&source=用心生活！创造非凡人生" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://yongliangzhang.github.io/blogs/2018/02/01/CentOS_7.2_安装Hive和Hive学习使用札记/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《CentOS 7.2 安装Hive和Hive学习使用札记》 — YoungLiang&url=https://yongliangzhang.github.io/blogs/2018/02/01/CentOS_7.2_安装Hive和Hive学习使用札记/&via=https://yongliangzhang.github.io/blogs" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://yongliangzhang.github.io/blogs/2018/02/01/CentOS_7.2_安装Hive和Hive学习使用札记/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/blogs/2018/02/01/Keepalived+Nginx+Tomcat_实现高可用Web集群/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Keepalived+Nginx+Tomcat 实现高可用Web集群</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/blogs/2018/02/01/Centos7.2安装MariaDB/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Centos7.2安装MariaDB</h4>
      </a>
    </div>
  
</nav>



    













ity版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC8zMzc5Ny8xMDM1MA==">
<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
</script>
<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->



</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="https://s1.ax2x.com/2018/02/01/Zxkyd.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="https://s1.ax2x.com/2018/02/01/Zxkyd.png" data-alipay="https://s1.ax2x.com/2018/02/01/ZxllR.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/blogs/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>YoungLiang &copy; 2018</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://yongliangzhang.github.io/blogs/2018/02/01/CentOS_7.2_安装Hive和Hive学习使用札记/&title=《CentOS 7.2 安装Hive和Hive学习使用札记》 — YoungLiang&pic=https://s1.ax2x.com/2018/01/31/ZL8UG.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://yongliangzhang.github.io/blogs/2018/02/01/CentOS_7.2_安装Hive和Hive学习使用札记/&title=《CentOS 7.2 安装Hive和Hive学习使用札记》 — YoungLiang&source=用心生活！创造非凡人生" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://yongliangzhang.github.io/blogs/2018/02/01/CentOS_7.2_安装Hive和Hive学习使用札记/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《CentOS 7.2 安装Hive和Hive学习使用札记》 — YoungLiang&url=https://yongliangzhang.github.io/blogs/2018/02/01/CentOS_7.2_安装Hive和Hive学习使用札记/&via=https://yongliangzhang.github.io/blogs" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://yongliangzhang.github.io/blogs/2018/02/01/CentOS_7.2_安装Hive和Hive学习使用札记/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAADLUlEQVR42u3aQZLiQAwEwPn/p2cfsAxUqU0EFukTYcDutA8KlfrnJz5+nx5//b69/uxMe68fbGxs7HXshJR/m5z5//zz3zxHJut88GiwsbGx17GfF5W/PiffttUkuU6+tj/PY2NjY38xO2kMZsWvZef/wsbGxsZOmocceQJrXw82Njb297Db5eZBUhIJXRtRXZylYWNjY388ux3EfvLnt8y3sbGxsT+Y/Vse+Xg1byfaYtkWrQf/wsbGxl7EzgtAGx7NoqhZbDRbPzY2NvYmdr7E2WadlnQSBtUtCjY2NvbN2Xlk3454Z3nObMxQF1dsbGzsReyTFL0tUXl5a1/GSfnExsbG3sdui9A7eMnI4dq1YWNjY9+dfTLuzcte3jbkZSl/SQ+uho2Njb2CnQdDLSYvRcm9TlqOFzuVsLGxsVewk4bhfLjbDgbyDKwdLWBjY2NvYp8sqF3u+Wjh2mEwNjY29g523hjMeO2DiArPaJT74D1jY2NjL2K3m2ZmLUeCOW97okeMjY2NvYidhz55OUnK3rUBU/4osbGxsfexZ6FMHtzPyt6sXBUvCRsbG3sRO1903lq0IVEeY80eNDY2NvZu9iziOWkPZlt5zl/Di0EvNjY29m3ZbQyUD1lPrjYrkG1zhY2Njb2VnSNn7cHzu+RhUztCLqYi2NjY2Ldlz2KdfEybLz0P+tuSVmdR2NjY2Ddhz8pGHutfFgCV1BfhFzY2NvYK9sn4dsbO25W8lLYPFBsbG3sTexbxt1FRUtLaoD8vvdHGHWxsbOxF7HZxs200baA/i40u2KyDjY2NfSv2SVjTti55ITxpZl4UYGxsbOx17LZ5yMcM5w1PO68eTkWwsbGxV7BP2ob8lsnS8+KXbzzCxsbG3sf+LY9Z69IuLhrTztoPbGxs7HXs/Mhv3AKSX+YRVb5CbGxs7E3svGjlQU+yxactRbPmZ9iQYGNjY9+Q3ebnecPQFr92G9BwVICNjY39xex8JDxrbGZRUR0nYWNjY389O7/NbLRwMkh+YwHDxsbG/mD2O4a77TBgFnLlowJsbGzsrey8bJxcum1XZvHWUXOCjY2NfT/2P4IfupaQKxeBAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/blogs/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '就这样走啦？';
            clearTimeout(titleTime);
        } else {
            document.title = '欢迎访问YoungLiang小站';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
